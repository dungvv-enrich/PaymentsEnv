<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Google Pay & Apple Pay for Web</title>
    <script async src="https://pay.google.com/gp/p/js/pay.js"></script>
    <script src="https://www.paypal.com/sdk/js?client-id=AUCjzO_FqPRK4G8axQl6Z2_tAWgsLkcEZVMjzAG2iWQShA-XGz7pRCCEFGapRdjjaAAIBv_41q-Kz08S&components=googlepay"></script>

    <!-- Apple Pay JS API -->
    <script src="https://applepay.cdn-apple.com/jsapi/v1/apple-pay-sdk.js"></script>
    <style>
      /* Apple Pay button styling */
      #apple-pay-button {
        display: block;
        -webkit-appearance: -apple-pay-button;
        appearance: -apple-pay-button;
        -apple-pay-button-type: buy;
        -apple-pay-button-style: black;
        width: 200px;
        height: 50px;
      }
    </style>
  </head>

  <body>
    <!-- Google Pay -->
    <!-- <div id="gpay-container"></div> -->

    <!-- Apple Pay Button -->
    <div id="apple-pay-button" onclick="onApplePayButtonClicked()"></div>

    <!-- <script type="text/javascript" src="main.js"></script> -->

    <!-- <script
      async
      src="https://pay.google.com/gp/p/js/pay.js"
      onload="onGooglePayLoaded()"
    ></script> -->
    <script>
      const queryString = window.location.search;
      const urlParams = new URLSearchParams(queryString);
      const amount = urlParams.get('amount');
      const key = urlParams.get('key');
      window.amount = amount;
      window.key = key;

      console.log({ amount, key });

      // Khởi tạo Apple Pay
      function onApplePayButtonClicked() {
        console.log('hello world');

        const paymentRequest = {
          countryCode: 'US',
          currencyCode: 'USD',
          total: {
            label: 'Your Store',
            amount: window.amount || '10.00',
          },
          supportedNetworks: ['visa', 'masterCard', 'amex'],
          merchantCapabilities: ['supports3DS'],
        };
        console.log('paymentRequest', paymentRequest);

        if (window.ApplePaySession && ApplePaySession.canMakePayments()) {
          console.log('true');
          const session = new ApplePaySession(3, paymentRequest);
          console.log({ session });
        }
      }
    </script>
  </body>
</html>
